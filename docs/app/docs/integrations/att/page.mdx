export const metadata = {
    title: 'App Tracking Transparency',
    description: 'Handling iOS App Tracking Transparency (ATT).',
};

<div className="prose">

# App Tracking Transparency

<Callout type="info" title="Auto-Enabled with Adjust">
    ATT is automatically enabled when you select Adjust integration during project setup.
    This ensures proper tracking permission handling before Adjust initializes.
</Callout>

Starting with iOS 14.5, apps must ask users for permission to track them across
apps and websites owned by other companies.

## Configuration

ATT configuration is set in your `app.json` file under the iOS `infoPlist` field.
This configures the permission dialog message shown to users.

<CodeBlock
    code={`{
  "expo": {
    "ios": {
      "infoPlist": {
        "NSUserTrackingUsageDescription": "This identifier will be used to deliver personalized ads to you."
      }
    }
  }
}`}
    language="json"
    filename="app.json"
/>

<Callout type="warning" title="Customize the Message">
    Apple reviews the tracking permission message. Make sure it clearly explains why you need tracking permission. Generic or misleading messages may cause app rejection.
</Callout>

## Initialization Order

When both ATT and Adjust are enabled, ATT permissions are requested **before** Adjust initializes.
This ensures Adjust receives the correct tracking authorization status.

<CodeBlock
    code={`// SDK initialization order (handled automatically)
if (Platform.OS === 'ios') {
  // 1. Request ATT permissions first
  const { status } = await requestTrackingPermissionsAsync();

  // 2. Then initialize Adjust with the correct status
  adjustService.initialize();
}`}
    language="typescript"
/>

## Usage

The ATT store manages permission state and can be accessed throughout your app:

<CodeBlock
    code={`import { useATTStore } from '@/store/att.store';

function MyComponent() {
  const { status, requestPermissions } = useATTStore();

  // status: 'undetermined' | 'denied' | 'authorized' | 'restricted'
}`}
    language="typescript"
/>

## iOS Only

ATT is an iOS-only feature. On Android, tracking permissions work differently
and don't require explicit user consent in the same way.

</div>
